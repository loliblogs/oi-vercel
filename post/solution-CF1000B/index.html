<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>[CodeForces1000]B. Light It Up | loli&#39;s oi blog</title><meta name="author" content="lolifamily"><meta name="keywords" content=""><meta name="description" content="一道贪心的简单题，插入无非就是两种情况：在开灯的区间内插入，应该让插入的元素尽可能地靠后在关灯的区间内插入，应该让插入的元素尽可能地靠前注意:g1和g2的含义，g1是指不落单（最后两次操作刚好完成一次开关）的后缀和，而g2则指的是会落单的后缀和i+1和i+2的选择，应该在纸上画图而不是凭空乱想因为n的奇偶性不知道，所以ans的初始值为末尾两个数的最大值B. Light It Uptime limit per test:1 secondmemory limit per test:256 megab"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><link rel="alternate" href="/oi/atom.xml" title="loli&#39;s oi blog" type="application/atom+xml"><link rel="icon" href="/oi/../images/favicon.ico"><style>@font-face{font-family:icomoon;src:url(/oi/fonts/icomoon.eot?q628ml);src:url(/oi/fonts/icomoon.eot?q628ml#iefix) format('embedded-opentype'),url(/oi/fonts/icomoon.ttf?q628ml) format('truetype'),url(/oi/fonts/icomoon.woff?q628ml) format('woff'),url(/oi/fonts/icomoon.svg?q628ml#icomoon) format('svg');font-weight:400;font-style:normal}</style><link rel="stylesheet" href="/oi/css/style.css"><!--[if lt IE 9]><style type="text/css">.nav-inner {top:0;}.author-meta {position:static;top:0;}.search-form {height:36px;}</style><script type="text/javascript" src="https://unpkg.com/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]--><meta name="generator" content="Hexo 6.3.0"></head><body><main class="app"><header id="header" class="header clearfix"><div id="nav" class="nav"><div class="nav-mobile"><button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button><h1 class="nav-mobile-title nav-mobile-item">loli&#39;s oi blog</h1><button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button></div><nav id="nav-inner" class="nav-inner"><a class="nav-item" href="/oi/../"><span class="nav-text">首页</span> </a><a class="nav-item" href="/oi/."><span class="nav-text">oi</span> </a><a class="nav-item" href="/oi/../project/"><span class="nav-text">project</span> </a><a class="nav-item" href="/oi/categories/%E9%A2%98%E8%A7%A3/"><span class="nav-text">题解</span> </a><a class="nav-item" href="/oi/categories/%E7%AE%97%E6%B3%95/"><span class="nav-text">算法</span> </a><a class="nav-item" href="/oi/categories/%E6%AF%94%E8%B5%9B/"><span class="nav-text">比赛</span> </a><a class="nav-item" href="/oi/tags/"><span class="nav-text">标签</span> </a><a class="nav-item" href="/oi/categories/"><span class="nav-text">分类</span> </a><a class="nav-item" href="/oi/archives/"><span class="nav-text">归档</span> </a><a class="nav-item" href="/oi/atom.xml"><span class="nav-text">订阅</span> </a><a class="nav-item" href="/oi/../about/"><span class="nav-text">关于</span></a></nav></div><aside id="aside" class="aside"><div id="aside-mask" class="aside-mask"></div><div id="aside-inner" class="aside-inner"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://blog.lolifamily.js.org/oi"></form><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#B-Light-It-Up"><span class="toc-number">1.</span> <span class="toc-text">B. Light It Up</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Input"><span class="toc-number">1.1.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output"><span class="toc-number">1.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Examples"><span class="toc-number">1.3.</span> <span class="toc-text">Examples</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#input"><span class="toc-number">1.3.1.</span> <span class="toc-text">input</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#output"><span class="toc-number">1.3.2.</span> <span class="toc-text">output</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#input-1"><span class="toc-number">1.3.3.</span> <span class="toc-text">input</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#output-1"><span class="toc-number">1.3.4.</span> <span class="toc-text">output</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#input-2"><span class="toc-number">1.3.5.</span> <span class="toc-text">input</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#output-2"><span class="toc-number">1.3.6.</span> <span class="toc-text">output</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Note"><span class="toc-number">1.4.</span> <span class="toc-text">Note</span></a></li></ol></li></ol></div></aside></header><div id="content" class="content"><div id="wrapper" class="wrapper" style="max-width:1000px"><article class="article" itemscope itemprop="blogPost"><header class="article-header"><h1 itemprop="name">[CodeForces1000]B. Light It Up</h1><div class="article-meta clearfix"><a class="article-date" href="https://blog.lolifamily.js.org/oi/post/solution-CF1000B/index.html"><i class="icon-calendar vm"></i> <time class="vm" datetime="2018-06-28T06:38:51.000Z" itemprop="datePublished">2018-06-28</time></a><div class="article-tag-list"><i class="icon-tag vm"></i> <a class="article-tag-link" href="/oi/tags/%E8%B4%AA%E5%BF%83/" rel="tag">贪心</a></div></div></header><section class="article-body markdown-body"><p>一道贪心的简单题，插入无非就是两种情况：</p><ul><li>在开灯的区间内插入，应该让插入的元素尽可能地靠后</li><li>在关灯的区间内插入，应该让插入的元素尽可能地靠前</li></ul><p>注意:</p><ul><li>g1和g2的含义，g1是指不落单（最后两次操作刚好完成一次开关）的后缀和，而g2则指的是会落单的后缀和</li><li>i+1和i+2的选择，应该在纸上画图而不是凭空乱想</li><li>因为n的奇偶性不知道，所以ans的初始值为末尾两个数的最大值</li></ul><span id="more"></span><h2 id="B-Light-It-Up"><a href="#B-Light-It-Up" class="headerlink" title="B. Light It Up"></a><center>B. Light It Up</center></h2><center>time limit per test:1 second</center><center>memory limit per test:256 megabytes</center><center>input:standard input</center><center>output:standard output</center><p>Recently, you bought a brand new smart lamp with programming features. At first, you set up a schedule to the lamp. Every day it will turn power on at moment $$$0$$$ and turn power off at moment $$$M$$$. Moreover, the lamp allows you to set a program of switching its state (states are “lights on” and “lights off”). Unfortunately, some program is already installed into the lamp.</p><p>The lamp allows only good programs. Good program can be represented as a non-empty array $$$a$$$, where $$$0 &lt; a_1 &lt; a_2 &lt; \dots &lt; a_{|a|} &lt; M$$$. All $$$a_i$$$ must be integers. Of course, preinstalled program is a good program.</p><p>The lamp follows program $$$a$$$ in next manner: at moment $$$0$$$ turns power and light on. Then at moment $$$a_i$$$ the lamp flips its state to opposite (if it was lit, it turns off, and vice versa). The state of the lamp flips instantly: for example, if you turn the light off at moment $$$1$$$ and then do nothing, the total time when the lamp is lit will be $$$1$$$. Finally, at moment $$$M$$$ the lamp is turning its power off regardless of its state.</p><p>Since you are not among those people who read instructions, and you don’t understand the language it’s written in, you realize (after some testing) the only possible way to alter the preinstalled program. You can insert at most one element into the program $$$a$$$, so it still should be a good program after alteration. Insertion can be done between any pair of consecutive elements of $$$a$$$, or even at the begining or at the end of $$$a$$$.</p><p>Find such a way to alter the program that the total time when the lamp is lit is maximum possible. Maybe you should leave program untouched. If the lamp is lit from $$$x$$$ till moment $$$y$$$, then its lit for $$$y - x$$$ units of time. Segments of time when the lamp is lit are summed up.</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>First line contains two space separated integers $$$n$$$ and $$$M$$$ ($$$1 \le n \le 10^5$$$, $$$2 \le M \le 10^9$$$) — the length of program $$$a$$$ and the moment when power turns off.</p><p>Second line contains $$$n$$$ space separated integers $$$a_1, a_2, \dots, a_n$$$ ($$$0 &lt; a_1 &lt; a_2 &lt; \dots &lt; a_n &lt; M$$$) — initially installed program $$$a$$$.</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>Print the only integer — maximum possible total time when the lamp is lit.</p><h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3 10</span><br><span class="line">4 6 7</span><br></pre></td></tr></table></figure><h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8</span><br></pre></td></tr></table></figure><h4 id="input-1"><a href="#input-1" class="headerlink" title="input"></a>input</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 12</span><br><span class="line">1 10</span><br></pre></td></tr></table></figure><h4 id="output-1"><a href="#output-1" class="headerlink" title="output"></a>output</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9</span><br></pre></td></tr></table></figure><h4 id="input-2"><a href="#input-2" class="headerlink" title="input"></a>input</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 7</span><br><span class="line">3 4</span><br></pre></td></tr></table></figure><h4 id="output-2"><a href="#output-2" class="headerlink" title="output"></a>output</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure><h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>In the first example, one of possible optimal solutions is to insert value $$$x &#x3D; 3$$$ before $$$a_1$$$, so program will be $$$[3, 4, 6, 7]$$$ and time of lamp being lit equals $$$(3 - 0) + (6 - 4) + (10 - 7) &#x3D; 8$$$. Other possible solution is to insert $$$x &#x3D; 5$$$ in appropriate place.</p><p>In the second example, there is only one optimal solution: to insert $$$x &#x3D; 2$$$ between $$$a_1$$$ and $$$a_2$$$. Program will become $$$[1, 2, 10]$$$, and answer will be $$$(1 - 0) + (10 - 2) &#x3D; 9$$$.</p><p>In the third example, optimal answer is to leave program untouched, so answer will be $$$(3 - 0) + (7 - 4) &#x3D; 6$$$.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">100005</span>],f[<span class="number">100005</span>],g1[<span class="number">100005</span>],g2[<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> i,n,m,ans=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">	a[n+<span class="number">1</span>]=m;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n+<span class="number">2</span>;i+=<span class="number">2</span>)f[i]=f[i<span class="number">-2</span>]+a[i]-a[i<span class="number">-1</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=n;i&gt;=<span class="number">1</span>;i-=<span class="number">2</span>)g1[i]=g1[i+<span class="number">2</span>]+a[i+<span class="number">1</span>]-a[i];</span><br><span class="line">	<span class="keyword">for</span>(i=n<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i-=<span class="number">2</span>)g2[i]=g2[i+<span class="number">2</span>]+a[i+<span class="number">1</span>]-a[i];</span><br><span class="line">	ans=<span class="built_in">max</span>(f[n+<span class="number">1</span>],f[n]);</span><br><span class="line">	<span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i+=<span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(a[i]-a[i<span class="number">-1</span>]&lt;=<span class="number">1</span>)<span class="keyword">continue</span>;</span><br><span class="line">			ans=<span class="built_in">max</span>(ans,f[i]<span class="number">-1</span>+g2[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i+=<span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(a[i+<span class="number">1</span>]-a[i]&lt;=<span class="number">1</span>)<span class="keyword">continue</span>;</span><br><span class="line">			ans=<span class="built_in">max</span>(ans,f[i]+a[i+<span class="number">1</span>]-a[i]<span class="number">-1</span>+g2[i+<span class="number">2</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i+=<span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(a[i]-a[i<span class="number">-1</span>]&lt;=<span class="number">1</span>)<span class="keyword">continue</span>;</span><br><span class="line">			ans=<span class="built_in">max</span>(ans,f[i]<span class="number">-1</span>+g1[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i+=<span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(a[i+<span class="number">1</span>]-a[i]&lt;=<span class="number">1</span>)<span class="keyword">continue</span>;</span><br><span class="line">			ans=<span class="built_in">max</span>(ans,f[i]+a[i+<span class="number">1</span>]-a[i]<span class="number">-1</span>+g1[i+<span class="number">2</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></section></article><a id="pagenext" href="/oi/post/solution-CF1000A/" class="article-next" title="[CodeForces1000]A. Codehorses T-shirts"><i class="icon-arrow-right"></i></a> <a id="pageprev" href="/oi/post/solution-CF1000C/" class="article-prev" title="[CodeForces1000]C. Covered Points Count"><i class="icon-arrow-left"></i></a><div class="comments"><div id="comments"></div><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script>new Gitalk({clientID:"f286404926d55f96d134",clientSecret:"149b70f078f14951dfd25f1ea7049e678e0e2b4a",repo:"discussion",owner:"loliblogs",admin:["lolifamily"],id:"42e348b2fcd0d08dee25e02afa894a71",distractionFreeMode:!0,title:"[CodeForces1000]B. Light It Up",body:"https://blog.lolifamily.js.org/oi/post/solution-CF1000B/",labels:["贪心"]}).render("comments")</script></div></div></div><footer class="footer">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a></footer></main><script>window.MathJax={tex:{inlineMath:[["$","$"],["$$$","$$$"]],displayMath:[["$$","$$"],["$$$$$$","$$$$$$"]],processEscapes:!0,autoload:{color:[],colorV2:["color"]},packages:{"[+]":["noerrors"]}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"],ignoreHtmlClass:"tex2jax_ignore",processHtmlClass:"tex2jax_process"},loader:{load:["[tex]/noerrors"]}}</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script><script src="https://unpkg.com/jquery@1.9.1/jquery.min.js"></script><script>$(function(){var n={nav:$("#nav"),aside:$("#aside"),asideInner:$("#aside-inner"),navInner:$("#nav-inner")},e=!1;function i(){"none"!==n.navInner.css("display")&&n.navInner.css("display","")}n.asideInner.on("webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend",function(){n.aside.hasClass("mobile-open")?n.aside.removeClass("mobile-open"):n.aside.removeClass("mobile-close panel-show"),e=!1}),$("#open-panel, #aside-mask").on("click",function(){e||(n.aside.hasClass("panel-show")?n.aside.addClass("mobile-close"):n.aside.addClass("mobile-open panel-show"))}),$("#open-menus").on("click",function(){n.navInner.slideToggle("normal",i)}),window.innerWidth<=960&&setTimeout(function(){n.navInner.slideUp("normal",i)},3e3),$(window).on("resize",function(){960<$(this).width()&&n.navInner.css("display","")})})</script><script src="/oi/js/scrollspy.min.js"></script><script>$(document.body).scrollspy({target:"#aside-inner a[href*=\\%]"}),$(window).on("resize",function(){var e=$("#header").width(),t=$("#wrapper").width(),t=($(this).width()-e-t)/2/2,i=$("#pageprev"),r=$("#pagenext"),d=(i.width()+r.width())/2;d<t?(t=t-d/2,d={position:"fixed",top:"50%",marginTop:-(i.width()+r.width())/4},i.css($.extend({left:e+t},d)),r.css($.extend({right:t},d))):(i.removeAttr("style"),r.removeAttr("style"))}).trigger("resize")</script></body></html>